{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import api from'../services/api';import CommentList from'../components/CommentList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PostDetail(_ref){var _post$author,_post$author2;let{isAuth}=_ref;const{id}=useParams();const[post,setPost]=useState(null);const[comments,setComments]=useState([]);const[newComment,setNewComment]=useState('');useEffect(()=>{fetchPost();fetchComments();},[id]);const fetchPost=async()=>{try{const res=await api.get(\"/posts/\".concat(id));setPost(res.data);}catch(err){console.error(err);}};const fetchComments=async()=>{try{const res=await api.get('/comments',{params:{post_id:id}});setComments(res.data);}catch(err){console.error(err);}};const[isLoading,setIsLoading]=useState(false);const getInitials=username=>{return username?username.charAt(0).toUpperCase():'?';};const handleAddComment=async e=>{e.preventDefault();setIsLoading(true);try{await api.post('/comments',{content:newComment,post_id:id});setNewComment('');fetchComments();}catch(err){alert('Failed to add comment');}finally{setIsLoading(false);}};if(!post)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"article\",{className:\"post-form\",style:{marginBottom:'3rem'},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"post-title\",style:{fontSize:'2.5rem',marginBottom:'1rem'},children:post.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-author\",style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"author-avatar\",children:getInitials((_post$author=post.author)===null||_post$author===void 0?void 0:_post$author.username)}),/*#__PURE__*/_jsxs(\"span\",{children:[\"By \",((_post$author2=post.author)===null||_post$author2===void 0?void 0:_post$author2.username)||'Anonymous']})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.1rem',lineHeight:'1.8',color:'var(--text-primary)',whiteSpace:'pre-wrap'},children:post.content})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'white',textAlign:'center',marginBottom:'2rem',fontSize:'2rem',fontFamily:'Playfair Display, serif'},children:\"\\uD83D\\uDCAC Comments\"}),isAuth&&/*#__PURE__*/_jsxs(\"div\",{className:\"post-form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"form-title\",children:\"Add Your Comment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddComment,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-textarea\",placeholder:\"Share your thoughts...\",value:newComment,onChange:e=>setNewComment(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn btn-hover-effect\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{width:'20px',height:'20px',margin:'0 auto'}}):'ðŸ’­ Post Comment'})]})]}),/*#__PURE__*/_jsx(CommentList,{comments:comments,isAuth:isAuth,fetchComments:fetchComments})]})]});}export default PostDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","api","CommentList","jsx","_jsx","jsxs","_jsxs","PostDetail","_ref","_post$author","_post$author2","isAuth","id","post","setPost","comments","setComments","newComment","setNewComment","fetchPost","fetchComments","res","get","concat","data","err","console","error","params","post_id","isLoading","setIsLoading","getInitials","username","charAt","toUpperCase","handleAddComment","e","preventDefault","content","alert","className","children","style","marginBottom","fontSize","title","author","lineHeight","color","whiteSpace","textAlign","fontFamily","onSubmit","placeholder","value","onChange","target","required","type","disabled","width","height","margin"],"sources":["C:/Users/risha/OneDrive/Desktop/blog app/public/src/pages/PostDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport api from '../services/api';\r\nimport CommentList from '../components/CommentList';\r\n\r\nfunction PostDetail({ isAuth }) {\r\n  const { id } = useParams();\r\n  const [post, setPost] = useState(null);\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchPost();\r\n    fetchComments();\r\n  }, [id]);\r\n\r\n  const fetchPost = async () => {\r\n    try {\r\n      const res = await api.get(`/posts/${id}`);\r\n      setPost(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const fetchComments = async () => {\r\n    try {\r\n      const res = await api.get('/comments', { params: { post_id: id } });\r\n      setComments(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getInitials = (username) => {\r\n    return username ? username.charAt(0).toUpperCase() : '?';\r\n  };\r\n\r\n  const handleAddComment = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    try {\r\n      await api.post('/comments', { content: newComment, post_id: id });\r\n      setNewComment('');\r\n      fetchComments();\r\n    } catch (err) {\r\n      alert('Failed to add comment');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!post) return (\r\n    <div className=\"loading\">\r\n      <div className=\"loading-spinner\"></div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {/* Post Content */}\r\n      <article className=\"post-form\" style={{ marginBottom: '3rem' }}>\r\n        <h1 className=\"post-title\" style={{ fontSize: '2.5rem', marginBottom: '1rem' }}>\r\n          {post.title}\r\n        </h1>\r\n        \r\n        <div className=\"post-author\" style={{ marginBottom: '2rem' }}>\r\n          <div className=\"author-avatar\">\r\n            {getInitials(post.author?.username)}\r\n          </div>\r\n          <span>By {post.author?.username || 'Anonymous'}</span>\r\n        </div>\r\n        \r\n        <div style={{ \r\n          fontSize: '1.1rem', \r\n          lineHeight: '1.8', \r\n          color: 'var(--text-primary)',\r\n          whiteSpace: 'pre-wrap'\r\n        }}>\r\n          {post.content}\r\n        </div>\r\n      </article>\r\n\r\n      {/* Comments Section */}\r\n      <section>\r\n        <h2 style={{ \r\n          color: 'white', \r\n          textAlign: 'center', \r\n          marginBottom: '2rem',\r\n          fontSize: '2rem',\r\n          fontFamily: 'Playfair Display, serif'\r\n        }}>\r\n          ðŸ’¬ Comments\r\n        </h2>\r\n        \r\n        {isAuth && (\r\n          <div className=\"post-form\">\r\n            <h3 className=\"form-title\">Add Your Comment</h3>\r\n            <form onSubmit={handleAddComment}>\r\n              <div className=\"form-group\">\r\n                <textarea\r\n                  className=\"form-textarea\"\r\n                  placeholder=\"Share your thoughts...\"\r\n                  value={newComment}\r\n                  onChange={(e) => setNewComment(e.target.value)}\r\n                  required\r\n                />\r\n              </div>\r\n              <button \r\n                type=\"submit\" \r\n                className=\"submit-btn btn-hover-effect\"\r\n                disabled={isLoading}\r\n              >\r\n                {isLoading ? (\r\n                  <div className=\"loading-spinner\" style={{ width: '20px', height: '20px', margin: '0 auto' }}></div>\r\n                ) : (\r\n                  'ðŸ’­ Post Comment'\r\n                )}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        )}\r\n        \r\n        <CommentList comments={comments} isAuth={isAuth} fetchComments={fetchComments} />\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}