{"ast":null,"code":"import React,{useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CommentList(_ref){let{comments,isAuth,fetchComments}=_ref;const[editing,setEditing]=useState(null);const[editContent,setEditContent]=useState('');const[isLoading,setIsLoading]=useState(false);const getInitials=username=>{return username?username.charAt(0).toUpperCase():'?';};const handleEdit=comment=>{setEditing(comment._id);setEditContent(comment.content);};const handleSave=async id=>{setIsLoading(true);try{await api.put(\"/comments/\".concat(id),{content:editContent});setEditing(null);fetchComments();}catch(err){alert('Failed to update comment');}finally{setIsLoading(false);}};const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this comment?')){setIsLoading(true);try{await api.delete(\"/comments/\".concat(id));fetchComments();}catch(err){alert('Failed to delete comment');}finally{setIsLoading(false);}}};if(!comments||comments.length===0){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'3rem',color:'rgba(255, 255, 255, 0.7)',fontSize:'1.1rem'},children:\"\\uD83D\\uDCAD No comments yet. Be the first to share your thoughts!\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"posts-grid\",children:comments.map(comment=>{var _comment$author,_comment$author2;return/*#__PURE__*/_jsx(\"article\",{className:\"post-card\",children:editing===comment._id?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"form-title\",children:\"Edit Comment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-textarea\",value:editContent,onChange:e=>setEditContent(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSave(comment._id),className:\"submit-btn btn-hover-effect\",disabled:isLoading,style:{flex:1},children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",style:{width:'16px',height:'16px',margin:'0 auto'}}):'‚úÖ Save'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(null),className:\"submit-btn\",style:{flex:1,background:'var(--gradient-secondary)'},children:\"\\u274C Cancel\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-author\",style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"author-avatar\",children:getInitials((_comment$author=comment.author)===null||_comment$author===void 0?void 0:_comment$author.username)}),/*#__PURE__*/_jsx(\"span\",{children:((_comment$author2=comment.author)===null||_comment$author2===void 0?void 0:_comment$author2.username)||'Anonymous'})]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-primary)',lineHeight:'1.6',marginBottom:'1.5rem',whiteSpace:'pre-wrap'},children:comment.content}),isAuth&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(comment),className:\"read-more-btn\",style:{padding:'0.5rem 1rem',fontSize:'0.9rem',background:'var(--gradient-accent)'},children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(comment._id),className:\"read-more-btn\",style:{padding:'0.5rem 1rem',fontSize:'0.9rem',background:'linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)'},disabled:isLoading,children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]})},comment._id);})});}export default CommentList;","map":{"version":3,"names":["React","useState","api","jsx","_jsx","jsxs","_jsxs","CommentList","_ref","comments","isAuth","fetchComments","editing","setEditing","editContent","setEditContent","isLoading","setIsLoading","getInitials","username","charAt","toUpperCase","handleEdit","comment","_id","content","handleSave","id","put","concat","err","alert","handleDelete","window","confirm","delete","length","style","textAlign","padding","color","fontSize","children","className","map","_comment$author","_comment$author2","value","onChange","e","target","display","gap","onClick","disabled","flex","width","height","margin","background","marginBottom","author","lineHeight","whiteSpace"],"sources":["C:/Users/risha/OneDrive/Desktop/blog app/public/src/components/CommentList.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport api from '../services/api';\r\n\r\nfunction CommentList({ comments, isAuth, fetchComments }) {\r\n  const [editing, setEditing] = useState(null);\r\n  const [editContent, setEditContent] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getInitials = (username) => {\r\n    return username ? username.charAt(0).toUpperCase() : '?';\r\n  };\r\n\r\n  const handleEdit = (comment) => {\r\n    setEditing(comment._id);\r\n    setEditContent(comment.content);\r\n  };\r\n\r\n  const handleSave = async (id) => {\r\n    setIsLoading(true);\r\n    try {\r\n      await api.put(`/comments/${id}`, { content: editContent });\r\n      setEditing(null);\r\n      fetchComments();\r\n    } catch (err) {\r\n      alert('Failed to update comment');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this comment?')) {\r\n      setIsLoading(true);\r\n      try {\r\n        await api.delete(`/comments/${id}`);\r\n        fetchComments();\r\n      } catch (err) {\r\n        alert('Failed to delete comment');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!comments || comments.length === 0) {\r\n    return (\r\n      <div style={{ \r\n        textAlign: 'center', \r\n        padding: '3rem', \r\n        color: 'rgba(255, 255, 255, 0.7)',\r\n        fontSize: '1.1rem'\r\n      }}>\r\n        üí≠ No comments yet. Be the first to share your thoughts!\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"posts-grid\">\r\n      {comments.map(comment => (\r\n        <article key={comment._id} className=\"post-card\">\r\n          {editing === comment._id ? (\r\n            <div>\r\n              <h4 className=\"form-title\">Edit Comment</h4>\r\n              <div className=\"form-group\">\r\n                <textarea\r\n                  className=\"form-textarea\"\r\n                  value={editContent}\r\n                  onChange={(e) => setEditContent(e.target.value)}\r\n                />\r\n              </div>\r\n              <div style={{ display: 'flex', gap: '1rem' }}>\r\n                <button \r\n                  onClick={() => handleSave(comment._id)}\r\n                  className=\"submit-btn btn-hover-effect\"\r\n                  disabled={isLoading}\r\n                  style={{ flex: 1 }}\r\n                >\r\n                  {isLoading ? (\r\n                    <div className=\"loading-spinner\" style={{ width: '16px', height: '16px', margin: '0 auto' }}></div>\r\n                  ) : (\r\n                    '‚úÖ Save'\r\n                  )}\r\n                </button>\r\n                <button \r\n                  onClick={() => setEditing(null)}\r\n                  className=\"submit-btn\"\r\n                  style={{ \r\n                    flex: 1,\r\n                    background: 'var(--gradient-secondary)'\r\n                  }}\r\n                >\r\n                  ‚ùå Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <div className=\"post-author\" style={{ marginBottom: '1rem' }}>\r\n                <div className=\"author-avatar\">\r\n                  {getInitials(comment.author?.username)}\r\n                </div>\r\n                <span>{comment.author?.username || 'Anonymous'}</span>\r\n              </div>\r\n              \r\n              <p style={{ \r\n                color: 'var(--text-primary)', \r\n                lineHeight: '1.6',\r\n                marginBottom: '1.5rem',\r\n                whiteSpace: 'pre-wrap'\r\n              }}>\r\n                {comment.content}\r\n              </p>\r\n              \r\n              {isAuth && (\r\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                  <button \r\n                    onClick={() => handleEdit(comment)}\r\n                    className=\"read-more-btn\"\r\n                    style={{ \r\n                      padding: '0.5rem 1rem',\r\n                      fontSize: '0.9rem',\r\n                      background: 'var(--gradient-accent)'\r\n                    }}\r\n                  >\r\n                    ‚úèÔ∏è Edit\r\n                  </button>\r\n                  <button \r\n                    onClick={() => handleDelete(comment._id)}\r\n                    className=\"read-more-btn\"\r\n                    style={{ \r\n                      padding: '0.5rem 1rem',\r\n                      fontSize: '0.9rem',\r\n                      background: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)'\r\n                    }}\r\n                    disabled={isLoading}\r\n                  >\r\n                    üóëÔ∏è Delete\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </article>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CommentList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}